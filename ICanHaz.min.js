(function(l){var n=function(){var f=function(){};f.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(a,b,d,c){if(!c){this.context=b;this.buffer=[]}if(!this.includes("",a))if(c)return a;else{this.send(a);return}a=this.render_pragmas(a);a=this.render_section(a,b,d);if(c)return this.render_tags(a,b,d,c);this.render_tags(a,b,d,c)},send:function(a){a!=""&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;
var b=this;return a.replace(RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag),function(d,c,e){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};b.pragmas[c]={};if(e){d=e.split("=");b.pragmas[c][d[0]]=d[1]}return""})},render_partial:function(a,b,d){a=this.trim(a);if(!d||d[a]===undefined)throw{message:"unknown_partial '"+a+"'"};if(typeof b[a]!="object")return this.render(d[a],b,d,true);return this.render(d[a],b[a],d,true)},render_section:function(a,
b,d){if(!this.includes("#",a)&&!this.includes("^",a))return a;var c=this;return a.replace(RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(e,i,j,h){e=c.find(j,b);if(i=="^")return!e||c.is_array(e)&&e.length===0?c.render(h,b,d,true):"";else if(i=="#")return c.is_array(e)?c.map(e,function(g){return c.render(h,c.create_context(g),d,true)}).join(""):c.is_object(e)?c.render(h,c.create_context(e),d,true):typeof e==="function"?
e.call(b,h,function(g){return c.render(g,b,d,true)}):e?c.render(h,b,d,true):""})},render_tags:function(a,b,d,c){var e=this,i=function(){return RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},j=i(),h=function(o,m,k){switch(m){case "!":return"";case "=":e.set_delimiters(k);j=i();return"";case ">":return e.render_partial(k,b,d);case "{":return e.find(k,b);default:return e.escape(e.find(k,b))}};a=a.split("\n");for(var g=0;g<a.length;g++){a[g]=a[g].replace(j,h,this);c||this.send(a[g])}if(c)return a.join("\n")},
set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){a=this.trim(a);var d;if(b[a]===false||b[a]===0||b[a])d=b[a];else if(this.context[a]===false||this.context[a]===0||this.context[a])d=this.context[a];if(typeof d==="function")return d.apply(b);
if(d!==undefined)return d;return""},includes:function(a,b){return b.indexOf(this.otag+a)!=-1},escape:function(a){a=String(a===null?"":a);return a.replace(/&(?!\w+;)|["<>\\]/g,function(b){switch(b){case "&":return"&amp;";case "\\":return"\\\\";case '"':return'"';case "<":return"&lt;";case ">":return"&gt;";default:return b}})},create_context:function(a){if(this.is_object(a))return a;else{var b=".";if(this.pragmas["IMPLICIT-ITERATOR"])b=this.pragmas["IMPLICIT-ITERATOR"].iterator;var d={};d[b]=a;return d}},
is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,b){if(typeof a.map=="function")return a.map(b);else{for(var d=[],c=a.length,e=0;e<c;e++)d.push(b(a[e]));return d}}};return{name:"mustache.js",version:"0.3.0",to_html:function(a,b,d,c){var e=new f;if(c)e.send=c;e.render(a,b,d);if(!c)return e.buffer.join("\n")}}}();(function(){var f={VERSION:"0.9",templates:{},
partials:{},$:window?window.jQuery||window.Zepto||null:null,addTemplate:function(a,b){console.log(a,b);if(f[a])throw"Invalid name: "+a+".";if(f.templates[a])throw'Template " + name + " exists';f.templates[a]=b;f[a]=function(d,c){d=d||{};var e=n.to_html(f.templates[a],d,f.partials);return f.$&&!c?l(e):e}},addPartial:function(a,b){if(f.partials[a])throw'Partial " + name + " exists';else f.partials[a]=b},clearAll:function(){for(var a in f.templates)delete f[a];f.templates={};f.partials={}},refresh:function(){f.clearAll();
f.grabTemplates()},grabTemplates:function(){var a,b=document.scripts,d=b.length,c,e=[];for(a=0;a<d;a++){c=b[a];console.log("looped",c.id);if(c&&c.innerText&&c.id&&(c.type==="text/html"||c.type==="text/x-icanhaz")){f[c.className.toLowerCase()==="partial"?"addPartial":"addTemplate"](c.id,"".trim?c.innerText.trim():s.replace(/^\s+/,"").replace(/\s+$/,""));e.unshift(c)}}a=0;for(d=e.length;a<d;a++)e[a].parentElement.removeChild(e[a])}};if(typeof require!=="undefined")module.exports=f;else window.ich=f;
if(document)f.$?f.$(function(){f.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){f.grabTemplates()})})()})(window.jQuery||window.Zepto);
